<%= link_to 'На главную', trainings_path, class: "btn-sm btn-secondary mt-1 buffer-bottom for-mobile" %>

<ul class="nav nav-tabs my-1">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#graphs">Упражнения</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#stats1">Тренировки</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#stats2">Список тр-вок</a>
  </li>
</ul>
<div class="tab-content">
  <div class="tab-pane fade show active" id="graphs">

    <div class="container my-bg-color">
      <div class="row my-3">
        <div class="col-lg-12 order-lg-1 mb-2 mt-3 no-paddings">

          <div class="center">
            <% @exercises_list.each do |list| %>
              <span class="vertical-buffers"><%= link_to list[1], stat_statistics_path(exercise_name_id: list[0], chart_name_id: params[:chart_name_id]), class: 'btn-sm btn-primary vertical-buffers' %></span>
            <% end %>
          </div>

        </div>
      </div>
    </div>

    <div class="container my-bg-color">
      <div class="row mt-3">
        <div class="col-lg-12 order-lg-2 mb-2 mt-2 no-paddings">
          <div class="center">
            <h3 class="center text_size"><%= @name %></h3>
          </div>

          <div>
            <div class="center">
              <% @chart_types.each do |key, value| %>
                <%= link_to key, stat_statistics_path(chart_name_id: value, exercise_name_id: params[:exercise_name_id]), class: 'btn-sm btn-primary' %> 
              <% end %>
            </div>
            <% case @chart_id %>
              <% when 1 then%> 
                <%= area_chart(@data, {theme: 'palette5'}) %>
              <% when 2 then  %> 
                <%= line_chart(@data, {theme: 'palette7', curve: 'stepline'}) %>
              <% when 3 then  %>
                <%= line_chart(@data) %>
              <% when 4 then  %> 
                <%= column_chart(@data, {theme: 'palette4'}) %>
            <% end %>
          </div>
          
        </div>
      </div>
    </div>

  </div>
  <div class="tab-pane fade" id="stats1">
    <h3 class="center text_size mt-2">Тренировок за все время: <%= current_user.trainings.count %></h3>

    <div class="container my-bg-color">
      <div class="row mt-3 mb-3">
        <div class="col-lg-12 order-lg-1 my-2 no-paddings max_height_all_tr">
          <div class="ex_buffer_both_my">
            <% if @all_tr_by_month.present? %>
              <div class="center mt-0 bg-light">
                <b>Количество тренировок по годам и месяцам</b>
                <%= area_chart(@all_tr_by_month, { theme: 'palette5' }) %>
              </div>
            <% end %>

            <% if @tr_by_label_chart.present? %>
              <div class="bg-light">
                <div class="center">
                  <div class="mt-3">
                    <b>Количество проведенных тренировок</b>
                    <%= bar_chart(@tr_by_label_chart, { height: 500, theme: 'palette7' }) %>
                  </div>
                </div>
              </div>
            <% end %>
            
            <% if @exercises_max_results.present? %>
              <div class="bg-light">
                <div class="center">
                  <div class="mt-3">
                    <b>Максимальное количество повторов в каждом упражнении</b>
                    <%= bar_chart(@exercises_max_results, { height: 500, theme: 'palette7' }) %>
                  </div>
                </div>
              </div>
                <%# if ex[0].match?(/бег|лыжи|Бег|Лыжи/) %>
                  <%# summ = ex[1] %>
                <%# else %>
                  <%# summ = ex[1].to_i %>
                <%# end %>
            <% end %>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane fade" id="stats2">
     <%= render template: 'trainings/all_trainings' %>
  </div>
</div>
